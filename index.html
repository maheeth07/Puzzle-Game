<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sliding Puzzle with Arrow Keys</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #222;
    font-family: sans-serif;
    margin: 0;
  }

  #puzzle {
  position: relative;
  width: 95vw;        /* take almost full width */
  max-width: 90vh;    /* donâ€™t exceed screen height */
  aspect-ratio: 1/1;  /* always square */
  background: #333;
  border-radius: 12px;
  margin: auto;
}


  .tile {
    position: absolute;
    background: #4caf50;
    color: white;
    font-size: clamp(16px, 5vw, 28px); /* scale with screen */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border-radius: 6px;
    transition: top 0.2s, left 0.2s;
    user-select: none;
  }

  .empty {
    display: none;
  }
</style>
</head>
<body>
<div id="puzzle"></div>

<script>
const puzzle = document.getElementById("puzzle");
const size = 4;
let tiles = [
  [1,2,3,4],
  [5,6,7,8],
  [9,10,11,12],
  [13,14,15,0]
];

// shuffle function
function shuffleTiles() {
  let flat = tiles.flat();
  for (let i = flat.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [flat[i], flat[j]] = [flat[j], flat[i]];
  }
  for (let r=0; r<size; r++)
    for (let c=0; c<size; c++)
      tiles[r][c] = flat[r*size + c];
}

// Draw puzzle
function drawTiles() {
  puzzle.innerHTML = '';
  const puzzleSize = puzzle.offsetWidth;
  const tileSize = puzzleSize / size;

  for (let r=0; r<size; r++) {
    for (let c=0; c<size; c++) {
      const num = tiles[r][c];
      const tile = document.createElement('div');
      tile.classList.add('tile');
      if (num === 0) tile.classList.add('empty');
      else tile.textContent = num;

      tile.style.width = tileSize - 6 + 'px';
      tile.style.height = tileSize - 6 + 'px';
      tile.style.top = r * tileSize + 'px';
      tile.style.left = c * tileSize + 'px';

      tile.addEventListener('click', () => moveTile(r,c));
      puzzle.appendChild(tile);
    }
  }
}

function findEmpty() {
  for (let r=0; r<size; r++)
    for (let c=0; c<size; c++)
      if (tiles[r][c] === 0) return [r,c];
}

function moveTile(r,c) {
  const [er,ec] = findEmpty();
  if ((Math.abs(r-er)===1 && c===ec) || (Math.abs(c-ec)===1 && r===er)) {
    [tiles[r][c], tiles[er][ec]] = [tiles[er][ec], tiles[r][c]];
    drawTiles();
    checkWin();
  }
}

// arrow key moves
function moveEmpty(key) {
  let [er,ec] = findEmpty();
  let tr=er, tc=ec;

  if(key==="ArrowUp") tr = er+1;
  if(key==="ArrowDown") tr = er-1;
  if(key==="ArrowLeft") tc = ec+1;
  if(key==="ArrowRight") tc = ec-1;

  if(tr>=0 && tr<size && tc>=0 && tc<size){
    [tiles[er][ec], tiles[tr][tc]] = [tiles[tr][tc], tiles[er][ec]];
    drawTiles();
    checkWin();
  }
}

function checkWin() {
  let count = 1;
  for (let r=0;r<size;r++){
    for (let c=0;c<size;c++){
      if(r===size-1 && c===size-1){ 
        if(tiles[r][c]===0) alert("ðŸŽ‰ You won!"); 
      }
      else if(tiles[r][c]!==count) return;
      count++;
    }
  }
}

document.addEventListener("keydown", e=>{
  if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){
    moveEmpty(e.key);
  }
});

// redraw on resize
window.addEventListener("resize", drawTiles);

shuffleTiles();
drawTiles();
</script>
</body>
</html>
